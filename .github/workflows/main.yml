name: Unity Install
on: push

jobs:
  build:
    name: Log Test
    runs-on: windows-latest
    env:
      UNITY_VERSION: 2020.3.16f1
        
    steps:
      - uses: actions/checkout@v3.0.2

      - name: ⚙ TEST DELAYED SCRIPT
        shell: pwsh
        run: |
          New-Item -Path . -Name "Logs" -ItemType "directory"
          Start-Job -FilePath DelayTest.ps1

      # Using https://github.com/microsoft/unitysetup.powershell
      - name: ⚙ WAIT
        shell: pwsh
        run: |
          New-Item -Path Logs/ -Name "testfile1.txt" -ItemType "file" -Value "This is a text string."
          Start-Sleep 30

      - name: Upload Logs
        uses: actions/upload-artifact@v3
        with:
          name: Logs
          path: Logs/
        if: always()
